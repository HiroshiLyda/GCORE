SELECT CASE WHEN EXISTS ( SELECT path MATCH (p1) -/path:~knows*/-> (p2) )
            THEN ( SELECT length(path) MATCH (p1) -/path:~knows*/-> (p2) )
            ELSE -1
            END AS length
PATH knows = () -[:knows]-> ()
MATCH
  (p1:Person), (p2:Person)
WHERE p1.id == 12345
  AND p2.id == 54321
